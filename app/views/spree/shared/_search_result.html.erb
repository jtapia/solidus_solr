<% if products.present? %>
  <div class='columns sixteen' data-hook='product_cross_sale_part'>
    <div class='row' data-hook='product_cross_sale_part_wrap'>
      <div id='up-sale-products' data-hook='cross_sale_products'>
        <h1 class='up-sale-product-title' itemprop='name'><%= title %></h1>

        <% products.each do |hit| %>
          <% product = hit.instance %>

          <% cache(taxon.present? ? [I18n.locale, current_pricing_options, taxon, product] : [I18n.locale, current_pricing_options, product]) do %>
            <% url = spree.product_path(product, taxon_id: taxon.try(:id)) %>

            <div class='columns three'>
              <div class="up-sale-product-product">
                <div class="up-sale-product-product__image">
                  <%= link_to(render('spree/shared/image', image: product.display_image, size: :small), url, itemprop: 'url') %>
                </div>

                <div class='up-sale-product__info'>
                  <span class='up-sale-product-name'>
                    <%= link_to truncate(product.name, length: 50), url, class: 'info', itemprop: 'name', title: product.name %>
                  </span>

                  <span itemprop='offers' itemscope itemtype='http://schema.org/Offer'>
                    <% if price = product.price_for(current_pricing_options) %>
                      <span class='price selling up-sale-product-product__price' itemprop='price' content='<%= price.to_d %>'>
                        <%= price.to_html %>
                      </span>
                    <% end %>
                    <span itemprop='priceCurrency' content='<%= current_pricing_options.currency %>'></span>
                  </span>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
<% end %>